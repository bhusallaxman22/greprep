# Copilot Instructions

<!-- Use this file to provide workspace-specific custom instructions to Copilot. For more details, visit https://code.visualstudio.com/docs/copilot/copilot-customization#_use-a-githubcopilotinstructionsmd-file -->

This is a GRE/GMAT test prep application built with:

- React with Vite for fast development
- Material UI for modern, minimal design components
- Firebase for authentication and data storage
- OpenRouter AI for question generation and AI evaluation
- React Router for navigation

## Key Features:

1. Dashboard showing exam history, accuracy rates, and AI-powered improvement suggestions
2. Individual question flow with one question per page
3. Answer tracking and performance analytics
4. Minimal and beautiful UI design

## Architectural Principles

- Atomic Design: strictly organize UI into atoms, molecules, organisms, templates, and pages.
- Separation of Concerns: isolate UI, state, business logic, side effects, and configuration.
- Reusability and Composition: prefer small, composable components with clear props.
- Predictable Data Flow: UI consumes data via props/context; side effects live in services/hooks.

## Project Structure

- `/src/components`
  - `/atoms` — small, reusable visual primitives with no business logic
    - Examples: `LoadingSpinner`, buttons, text, icons, small inputs
  - `/molecules` — composed from atoms, small self-contained UI blocks
    - Examples: `SelectableCard`, `StatCard`, `QuestionOptions`, `DifficultySelect`, `QuestionCountSelect`, `SummaryChips`
  - `/organisms` — larger composed sections
    - Examples: `QuestionHeader`, `QuestionNavigatorDialog`, `AIEvaluationRenderer`, `AIInsights`
  - `/templates` — page layout/wrappers (no data fetching)
  - `/pages` — route-level containers that assemble organisms/templates
- `/src/services` — impure side-effect modules (API/Firebase/OpenRouter) only
  - Examples: `firebase.js`, `openrouter.js`, `userProgress.js`
- `/src/hooks` — reusable hooks encapsulating stateful UI or data fetching
  - Examples: `useMenu`, `useSnackbar`, domain hooks that call services
- `/src/context` — React context providers for global state (e.g., `AuthContext`)
- `/src/utils` — pure functions only (formatting, math, guards)
  - Examples: `formatters.js`
- `/src/constants` — enums, config maps, constant data
  - Examples: `appStates.js`, `testConfig.js`

## Code Style & Patterns

- Use functional components with React hooks.
- Follow Material UI patterns; prefer `sx` prop and theme values for styling.
- Validate props with `PropTypes` (TypeScript-style discipline).
- Avoid inline complex logic in JSX; precompute render blocks in variables.
- Use stable keys for lists (never array index).
- Keep components pure (no direct service calls in atoms/molecules/organisms).
- Local UI state is allowed; business logic/side effects go to hooks/services.
- Use async/await and try/catch in services and data hooks; surface errors via return values or UI hooks (e.g., `useSnackbar`).

## Separation of Concerns

- UI (components): render-only; accept data/handlers via props; minimal presentational state.
- Hooks: own state + orchestrate calls to services; map service data to UI-friendly shapes.
- Services: network/Firestore/OpenRouter I/O; no React or UI concerns.
- Utils: stateless pure helpers; no I/O.
- Constants: configuration, enums, option lists.
- Context: cross-cutting state (auth, feature flags), not API wiring.

## Component Authoring Checklist

- Place new UI in the lowest applicable atomic layer.
- No direct Firebase/OpenRouter usage in components; use a hook or pass data via props.
- Keep props small and explicit; document with `PropTypes`.
- Handle loading/empty/error states explicitly; avoid nested ternaries.
- Extract repeated UI into atoms/molecules (e.g., cards, selects, chips).

## Data & Side-Effects Guidelines

- Create a service function per remote concern (e.g., `firebase.calculateUserStats`, `openrouter.evaluatePerformance`).
- Wrap service usage in hooks when UI needs lifecycle/state (e.g., `useUserStats`).
- Cache/memoize where beneficial; keep caching in hooks/services, not presentational components.

## Existing Mappings (examples in this repo)

- Molecules: `SelectableCard`, `StatCard`, `QuestionOptions`, `DifficultySelect`, `QuestionCountSelect`, `SummaryChips`.
- Organisms: `QuestionHeader`, `QuestionNavigatorDialog`, `AIInsights`, `AIEvaluationRenderer`.
- Utils: `formatters.js` (`formatDate`, `percent`).
- Constants: `appStates.js`, `testConfig.js`.
- Hooks: `useMenu`, `useSnackbar`.

Adhere to these guidelines for any new code, refactors, or suggestions generated by Copilot.
